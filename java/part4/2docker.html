<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>glls</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="纸上得来终觉浅 觉知此事需躬行">
    
    <link rel="preload" href="/assets/css/0.styles.cdbb3724.css" as="style"><link rel="preload" href="/assets/js/app.cf24e5c2.js" as="script"><link rel="preload" href="/assets/js/3.96e6e8dc.js" as="script"><link rel="preload" href="/assets/js/1.9cd0fbb8.js" as="script"><link rel="preload" href="/assets/js/29.62eca51f.js" as="script"><link rel="prefetch" href="/assets/js/10.e6679e1d.js"><link rel="prefetch" href="/assets/js/11.9031e886.js"><link rel="prefetch" href="/assets/js/12.7027c54a.js"><link rel="prefetch" href="/assets/js/13.000bd0c6.js"><link rel="prefetch" href="/assets/js/14.ed887876.js"><link rel="prefetch" href="/assets/js/15.a00f8181.js"><link rel="prefetch" href="/assets/js/16.6194edbb.js"><link rel="prefetch" href="/assets/js/17.35574e05.js"><link rel="prefetch" href="/assets/js/18.b4a0dc23.js"><link rel="prefetch" href="/assets/js/19.bbfbdcdb.js"><link rel="prefetch" href="/assets/js/20.f9712cb5.js"><link rel="prefetch" href="/assets/js/21.c5d37f51.js"><link rel="prefetch" href="/assets/js/22.8b74c1d6.js"><link rel="prefetch" href="/assets/js/23.afb7d1dd.js"><link rel="prefetch" href="/assets/js/24.93bb133f.js"><link rel="prefetch" href="/assets/js/25.174e73e9.js"><link rel="prefetch" href="/assets/js/26.1f08cfe8.js"><link rel="prefetch" href="/assets/js/27.f5387759.js"><link rel="prefetch" href="/assets/js/28.464ce114.js"><link rel="prefetch" href="/assets/js/30.eeb93e3b.js"><link rel="prefetch" href="/assets/js/31.119e5f3b.js"><link rel="prefetch" href="/assets/js/32.375b3a8c.js"><link rel="prefetch" href="/assets/js/33.2a684361.js"><link rel="prefetch" href="/assets/js/34.4bd3bd53.js"><link rel="prefetch" href="/assets/js/35.fc2b775b.js"><link rel="prefetch" href="/assets/js/36.3cf77c8a.js"><link rel="prefetch" href="/assets/js/37.f2330e4e.js"><link rel="prefetch" href="/assets/js/38.537589f8.js"><link rel="prefetch" href="/assets/js/39.d6b70184.js"><link rel="prefetch" href="/assets/js/4.49793d4e.js"><link rel="prefetch" href="/assets/js/40.59f90851.js"><link rel="prefetch" href="/assets/js/41.a239b386.js"><link rel="prefetch" href="/assets/js/42.1e9cf7f1.js"><link rel="prefetch" href="/assets/js/43.917a5a3e.js"><link rel="prefetch" href="/assets/js/44.d31fbeb1.js"><link rel="prefetch" href="/assets/js/45.0b30863c.js"><link rel="prefetch" href="/assets/js/46.fa698e27.js"><link rel="prefetch" href="/assets/js/47.5cb4f5d8.js"><link rel="prefetch" href="/assets/js/48.8ddd1ecc.js"><link rel="prefetch" href="/assets/js/49.caf008b4.js"><link rel="prefetch" href="/assets/js/5.3e5c9da5.js"><link rel="prefetch" href="/assets/js/50.fde3c085.js"><link rel="prefetch" href="/assets/js/51.db458b1d.js"><link rel="prefetch" href="/assets/js/52.2cd02180.js"><link rel="prefetch" href="/assets/js/53.48a1e4d8.js"><link rel="prefetch" href="/assets/js/54.98d82cfd.js"><link rel="prefetch" href="/assets/js/6.e9258025.js"><link rel="prefetch" href="/assets/js/7.3130d9c3.js"><link rel="prefetch" href="/assets/js/8.eca9b250.js"><link rel="prefetch" href="/assets/js/9.e91cc53b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cdbb3724.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>glls</h3> <p class="description" data-v-59e6cb88>纸上得来终觉浅 觉知此事需躬行</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">glls</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="/java/" class="nav-link router-link-active"><i class="undefined"></i>
  java
</a></div><div class="nav-item"><a href="/front/" class="nav-link"><i class="undefined"></i>
  前端
</a></div><div class="nav-item"><a href="/pro/" class="nav-link"><i class="undefined"></i>
  项目案例
</a></div><div class="nav-item"><a href="/mianshi/" class="nav-link"><i class="undefined"></i>
  面试
</a></div><div class="nav-item"><a href="/qa/" class="nav-link"><i class="undefined"></i>
  QA
</a></div><div class="nav-item"><a href="/bishe/" class="nav-link"><i class="undefined"></i>
  毕设
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      在线资料
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/712139234359182/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://i.heyige.cn/interview/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  东哥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/laorenyuma/bh9tm1" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  瑞哥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://codingsir.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  邢哥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://modao.cc/community?source=nav&amp;page=1" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  原型图网站1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.axureshop.com/a/b/axure-prototypes" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  原型图网站2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>13</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="/java/" class="nav-link router-link-active"><i class="undefined"></i>
  java
</a></div><div class="nav-item"><a href="/front/" class="nav-link"><i class="undefined"></i>
  前端
</a></div><div class="nav-item"><a href="/pro/" class="nav-link"><i class="undefined"></i>
  项目案例
</a></div><div class="nav-item"><a href="/mianshi/" class="nav-link"><i class="undefined"></i>
  面试
</a></div><div class="nav-item"><a href="/qa/" class="nav-link"><i class="undefined"></i>
  QA
</a></div><div class="nav-item"><a href="/bishe/" class="nav-link"><i class="undefined"></i>
  毕设
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      在线资料
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/712139234359182/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://i.heyige.cn/interview/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  东哥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.yuque.com/laorenyuma/bh9tm1" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  瑞哥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://codingsir.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  邢哥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://modao.cc/community?source=nav&amp;page=1" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  原型图网站1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.axureshop.com/a/b/axure-prototypes" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  原型图网站2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/java/" class="sidebar-heading clickable router-link-active"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/" aria-current="page" class="sidebar-link">学前必读</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/java/part1/test1" class="sidebar-heading clickable"><span>part1</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/java/part2/servlet.html" class="sidebar-heading clickable"><span>part2</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/java/part3/mybatis" class="sidebar-heading clickable"><span>part3</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-0"><a href="/java/part4/1linux" class="sidebar-heading clickable open"><span>part4</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/part4/1linux.html" class="sidebar-link">1linux</a></li><li><a href="/java/part4/2docker.html" aria-current="page" class="active sidebar-link">2docker</a></li><li><a href="/java/part4/3nginx.html" class="sidebar-link">3nginx</a></li><li><a href="/java/part4/4redis.html" class="sidebar-link">3redis</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title"></h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><p><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1586333742105.png" alt="1586333742105"></p> <blockquote><p>Author：glls</p> <p>Version：9.0.1</p></blockquote> <p>[TOC]</p> <h3 id="一、引言"><a href="#一、引言" class="header-anchor">#</a> 一、引言</h3> <hr> <h4 id="_1-1-环境不一致"><a href="#_1-1-环境不一致" class="header-anchor">#</a> 1.1 环境不一致</h4> <blockquote><p>我本地运行没问题啊：由于环境不一致，导致相同的程序，运行结果却不一致。</p></blockquote> <h4 id="_1-2-隔离性"><a href="#_1-2-隔离性" class="header-anchor">#</a> 1.2 隔离性</h4> <blockquote><p>哪个哥们又写死循环了，怎么这么卡：在多用户的操作系统下，会因为其他用户的操作失误影响到你自己编些的程序。</p></blockquote> <h4 id="_1-3-弹性伸缩"><a href="#_1-3-弹性伸缩" class="header-anchor">#</a> 1.3 弹性伸缩</h4> <blockquote><p>淘宝在双11的时候，用户量暴增：需要很多很多的运维人员去增加部署的服务器，运维成本过高的问题。</p></blockquote> <h4 id="_1-4-学习成本"><a href="#_1-4-学习成本" class="header-anchor">#</a> 1.4 学习成本</h4> <blockquote><p>学习一门技术，得先安装啊：学习每一门技术都要先安装响应的软件，但是还有他所依赖的各种环境，安装软件成本快高过学习成本啦。</p></blockquote> <h3 id="二、docker介绍"><a href="#二、docker介绍" class="header-anchor">#</a> 二、Docker介绍</h3> <hr> <h4 id="_2-1-docker的由来"><a href="#_2-1-docker的由来" class="header-anchor">#</a> 2.1 Docker的由来</h4> <blockquote><p>一帮年轻人创业，创办了一家公司，2010年的专门做PAAS平台。但是到了2013年的时候，像亚马逊，微软，Google都开始做PAAS平台。到了2013年，公司资金链断裂，不得不倒闭，于是将公司内的核心技术对外开源，核心技术就是Docker。由于开源了Docker，到了2014年的时候，得到了C轮的融资 $4000W，2015年的时候，得到了D轮的融资.$9500W。于是公司开始全神贯注的维护Docker。</p></blockquote> <table><thead><tr><th style="text-align:center;">Docker主要作者-所罗门</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1586340594252.png" alt="1586340594252"></td></tr></tbody></table> <table><thead><tr><th style="text-align:center;">Docker的作者已经离开了维护Docker的团队</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1586340639934.png" alt="1586340639934"></td></tr></tbody></table> <h4 id="_2-2-docker的思想"><a href="#_2-2-docker的思想" class="header-anchor">#</a> 2.2 Docker的思想</h4> <blockquote><ul><li><p>集装箱：会将所有需要的内容放到不同的集装箱中，谁需要这些环境就直接拿到这个集装箱就可以了。</p></li> <li><p>标准化：</p> <ul><li>运输的标准化：Docker有一个码头，所有上传的集装箱都放在了这个码头上，当谁需要某一个环境，就直接指派大海疼去搬运这个集装箱就可以了。</li> <li>命令的标准化：Docker提供了一些列的命令，帮助我们去获取集装箱等等操作。</li> <li>提供了REST的API：衍生出了很多的图形化界面，Rancher。</li></ul></li> <li><p>隔离性：Docker在运行集装箱内的内容时，会在Linux的内核中，单独的开辟一片空间，这片空间不会影响到其他程序。</p></li> <li><p>中央仓库|注册中心：超级码头，上面放的就是集装箱</p></li> <li><p>镜像：就是集装箱</p></li> <li><p>容器：运行起来的镜像</p></li></ul></blockquote> <h3 id="三、docker的安装"><a href="#三、docker的安装" class="header-anchor">#</a> 三、Docker的安装</h3> <hr> <h4 id="_3-1-下载docker依赖的环境"><a href="#_3-1-下载docker依赖的环境" class="header-anchor">#</a> 3.1 下载Docker依赖的环境</h4> <blockquote><p>想安装Docker，需要先将依赖的环境全部下载，就像Maven依赖JDK一样</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> yum-utils device-mapper-persistent-data lvm2
</code></pre></div><h4 id="_3-2-指定docker镜像源"><a href="#_3-2-指定docker镜像源" class="header-anchor">#</a> 3.2 指定Docker镜像源</h4> <blockquote><p>默认下载Docker会去国外服务器下载，速度较慢，我们可以设置为阿里云镜像源，速度更快</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code>yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</code></pre></div><h4 id="_3-3-安装docker"><a href="#_3-3-安装docker" class="header-anchor">#</a> 3.3 安装Docker</h4> <blockquote><p>依然采用yum的方式安装</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code>yum makecache fast
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> docker-ce
</code></pre></div><h4 id="_3-4-启动docker并测试"><a href="#_3-4-启动docker并测试" class="header-anchor">#</a> 3.4 启动Docker并测试</h4> <blockquote><p>安装成功后，需要手动启动，设置为开机自启，并测试一下Docker</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 启动Docker服务</span>
systemctl start <span class="token function">docker</span>
<span class="token comment"># 设置开机自动启动</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
<span class="token comment"># 测试    运行hello-world 镜像 根据这个镜像 创建容器</span>
<span class="token function">docker</span> run hello-world
</code></pre></div><h3 id="四、docker的中央仓库【重点】"><a href="#四、docker的中央仓库【重点】" class="header-anchor">#</a> 四、Docker的中央仓库【<code>重点</code>】</h3> <hr> <blockquote><ul><li><p>Docker官方的中央仓库：这个仓库是镜像最全的，但是下载速度较慢。</p> <p>https://hub.docker.com/</p></li> <li><p>国内的镜像网站：网易蜂巢，daoCloud等，下载速度快，但是镜像相对不全。</p> <p>https://c.163yun.com/hub#/home</p> <p>http://hub.daocloud.io/     （推荐使用）</p></li> <li><p>在公司内部会采用私服的方式拉取镜像，需要添加配置，如下……</p></li></ul></blockquote> <div class="language-json extra-class"><pre class="language-json"><code>配置阿里云镜像仓库
https<span class="token operator">:</span><span class="token comment">//cr.console.aliyun.com/cn-hangzhou/instances/mirrors</span>

# 需要创建/etc/docker/daemon.json，并添加如下内容
<span class="token punctuation">{</span>
	<span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://registry.docker-cn.com&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;insecure-registries&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ip:port&quot;</span><span class="token punctuation">]</span>   
<span class="token punctuation">}</span>
# 重启两个服务
systemctl daemon-reload
systemctl restart docker
</code></pre></div><h3 id="五、镜像的操作【重点】"><a href="#五、镜像的操作【重点】" class="header-anchor">#</a> 五、镜像的操作【<code>重点</code>】</h3> <hr> <h4 id="_5-1-拉取镜像"><a href="#_5-1-拉取镜像" class="header-anchor">#</a> 5.1 拉取镜像</h4> <blockquote><p>从中央仓库拉取镜像到本地</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> pull 镜像名称<span class="token punctuation">[</span>:tag<span class="token punctuation">]</span>

<span class="token comment"># 举个栗子：docker pull daocloud.io/library/tomcat:8.5.15-jre8</span>
</code></pre></div><h4 id="_5-2-查看本地全部镜像"><a href="#_5-2-查看本地全部镜像" class="header-anchor">#</a> 5.2 查看本地全部镜像</h4> <blockquote><p>查看本地已经安装过的镜像信息，包含标识，名称，版本，更新时间，大小</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> images
</code></pre></div><h4 id="_5-3-删除本地镜像"><a href="#_5-3-删除本地镜像" class="header-anchor">#</a> 5.3 删除本地镜像</h4> <blockquote><p>镜像会占用磁盘空间，可以直接手动删除，表示通过查看获取</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> rmi 镜像的标识
</code></pre></div><h4 id="_5-4-镜像的导入导出"><a href="#_5-4-镜像的导入导出" class="header-anchor">#</a> 5.4 镜像的导入导出</h4> <blockquote><p>如果因为网络原因可以通过硬盘的方式传输镜像，虽然不规范，但是有效，但是这种方式导出的镜像名称和版本都是null，需要手动修改</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 将本地的镜像导出</span>
<span class="token function">docker</span> save <span class="token parameter variable">-o</span> 导出的路径 镜像id         <span class="token comment"># docker save -o /usr/local/tmp/mytomcat8 b8dfe9ade316</span>
<span class="token comment"># 加载本地的镜像文件</span>
<span class="token function">docker</span> load <span class="token parameter variable">-i</span> 镜像文件
<span class="token comment"># 修改镜像名称</span>
<span class="token function">docker</span> tag 镜像id 新镜像名称:版本
</code></pre></div><h3 id="六、容器操作【重点】"><a href="#六、容器操作【重点】" class="header-anchor">#</a> 六、容器操作【<code>重点</code>】</h3> <hr> <h4 id="_6-1-运行容器"><a href="#_6-1-运行容器" class="header-anchor">#</a> 6.1 运行容器</h4> <blockquote><p>运行容器需要指定具体镜像，如果镜像不存在，会直接下载</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 简单操作</span>
<span class="token function">docker</span> run 镜像的标识<span class="token operator">|</span>镜像名称<span class="token punctuation">[</span>:tag<span class="token punctuation">]</span>

<span class="token comment"># 常用的参数</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> 宿主机端口:容器端口 <span class="token parameter variable">--name</span> 容器名称 镜像的标识<span class="token operator">|</span>镜像名称<span class="token punctuation">[</span>:tag<span class="token punctuation">]</span>
<span class="token comment"># -d：代表后台运行容器</span>
<span class="token comment"># -p 宿主机端口:容器端口：为了映射当前Linux的端口和容器的端口</span>
<span class="token comment"># --name 容器名称：指定容器的名称</span>
</code></pre></div><h4 id="_6-2-查看正在运行的容器"><a href="#_6-2-查看正在运行的容器" class="header-anchor">#</a> 6.2 查看正在运行的容器</h4> <blockquote><p>查看全部正在运行的容器信息</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> <span class="token function">ps</span> <span class="token punctuation">[</span>-qa<span class="token punctuation">]</span>
<span class="token comment"># -a：查看全部的容器，包括没有运行</span>
<span class="token comment"># -q：只查看容器的标识</span>
</code></pre></div><h4 id="_6-3-查看容器日志"><a href="#_6-3-查看容器日志" class="header-anchor">#</a> 6.3 查看容器日志</h4> <blockquote><p>查看容器日志，以查看容器运行的信息</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> logs <span class="token parameter variable">-f</span> 容器id
<span class="token comment"># -f：可以滚动查看日志的最后几行</span>
</code></pre></div><h4 id="_6-4-进入容器内容部"><a href="#_6-4-进入容器内容部" class="header-anchor">#</a> 6.4 进入容器内容部</h4> <blockquote><p>可以进入容器内部进行操作</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器id    <span class="token function">bash</span>
</code></pre></div><p>出去:  ctrl + p + q</p> <h4 id="_6-5-复制内容到容器"><a href="#_6-5-复制内容到容器" class="header-anchor">#</a> 6.5 复制内容到容器</h4> <blockquote><p>将宿主机的文件复制到容器内部的指定目录</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> <span class="token function">cp</span> 文件名称 容器id:容器内部路径
</code></pre></div><blockquote><p>将容器内部的文件复制到宿主机</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">cp</span> 容器id：容器目录    宿主机目录
</code></pre></div><h4 id="_6-6-重启-启动-停止-删除容器"><a href="#_6-6-重启-启动-停止-删除容器" class="header-anchor">#</a> 6.6 重启&amp;启动&amp;停止&amp;删除容器</h4> <blockquote><p>容器的启动，停止，删除等操作，后续经常会使用到</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 重新启动容器</span>
<span class="token function">docker</span> restart 容器id

<span class="token comment"># 启动停止运行的容器</span>
<span class="token function">docker</span> start 容器id

<span class="token comment"># 停止指定的容器（删除容器前，需要先停止容器）</span>
<span class="token function">docker</span> stop 容器id
<span class="token comment"># 停止全部容器</span>
<span class="token function">docker</span> stop <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-qa</span><span class="token variable">)</span></span>

<span class="token comment"># 删除指定容器</span>
<span class="token function">docker</span> <span class="token function">rm</span> 容器id
<span class="token comment"># 删除全部容器</span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-qa</span><span class="token variable">)</span></span>
</code></pre></div><h4 id="_6-7提交运行时容器成为镜像"><a href="#_6-7提交运行时容器成为镜像" class="header-anchor">#</a> 6.7提交运行时容器成为镜像</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> commit <span class="token parameter variable">-a</span><span class="token operator">=</span><span class="token string">'作者'</span> <span class="token parameter variable">-m</span><span class="token operator">=</span><span class="token string">'备注'</span> 运行时容器ID 新镜像名称
</code></pre></div><h4 id="_6-8查看容器元信息"><a href="#_6-8查看容器元信息" class="header-anchor">#</a> 6.8查看容器元信息</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> inspect 容器id
</code></pre></div><h4 id="_6-9-设置容器自动启动"><a href="#_6-9-设置容器自动启动" class="header-anchor">#</a> 6.9 设置容器自动启动</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> update <span class="token parameter variable">--restart</span><span class="token operator">=</span>always 容器id
</code></pre></div><h3 id="七、docker应用"><a href="#七、docker应用" class="header-anchor">#</a> 七、Docker应用</h3> <hr> <h4 id="_7-1-docker安装tomcat"><a href="#_7-1-docker安装tomcat" class="header-anchor">#</a> 7.1 Docker安装Tomcat</h4> <blockquote><p>运行Tomcat容器，为部署SSM工程做准备</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8080</span>:8080 <span class="token parameter variable">--name</span> tomcat daocloud.io/library/tomcat:8.5.15-jre8
</code></pre></div><h4 id="_7-2-docker安装mysql"><a href="#_7-2-docker安装mysql" class="header-anchor">#</a> 7.2 Docker安装MySQL</h4> <blockquote><p>运行MySQL容器，为部署SSM工程做准备</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>root daocloud.io/library/mysql:5.7.4
</code></pre></div><h4 id="_7-3-部署ssm工程"><a href="#_7-3-部署ssm工程" class="header-anchor">#</a> 7.3 部署SSM工程</h4> <blockquote><ul><li>修改SSM工程环境，设置为Linux中Docker容器的信息</li> <li>通过Maven的package重新打成war包</li> <li>讲Windows下的war包复制到Linux中</li> <li>通过docker命令将宿主机的war包复制到容器内部</li> <li>测试访问SSM工程</li></ul></blockquote> <h3 id="八、数据卷【重点】"><a href="#八、数据卷【重点】" class="header-anchor">#</a> 八、数据卷【<code>重点</code>】</h3> <hr> <blockquote><p>为了部署SSM的工程，需要使用到cp的命令将宿主机内的ssm.war文件复制到容器内部。</p> <p>数据卷：将宿主机的一个目录映射到容器的一个目录中。</p> <p>可以在宿主机中操作目录中的内容，那么容器内部映射的文件，也会跟着一起改变。</p></blockquote> <h4 id="_8-1-创建数据卷"><a href="#_8-1-创建数据卷" class="header-anchor">#</a> 8.1 创建数据卷</h4> <blockquote><p>创建数据卷之后，默认会存放在一个目录下 /var/lib/docker/volumes/数据卷名称/_data</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> volume create 数据卷名称
</code></pre></div><h4 id="_8-2-查看数据卷详情"><a href="#_8-2-查看数据卷详情" class="header-anchor">#</a> 8.2 查看数据卷详情</h4> <blockquote><p>查看数据卷的详细信息，可以查询到存放路径，创建时间等等</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> volume inspect 数据卷名称
</code></pre></div><h4 id="_8-3-查看全部数据卷"><a href="#_8-3-查看全部数据卷" class="header-anchor">#</a> 8.3 查看全部数据卷</h4> <blockquote><p>查看全部数据卷信息</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> volume <span class="token function">ls</span>
</code></pre></div><h4 id="_8-4-删除数据卷"><a href="#_8-4-删除数据卷" class="header-anchor">#</a> 8.4 删除数据卷</h4> <blockquote><p>删除指定数据卷</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> volume <span class="token function">rm</span> 数据卷名称
</code></pre></div><h4 id="_8-5-容器映射数据卷"><a href="#_8-5-容器映射数据卷" class="header-anchor">#</a> 8.5 容器映射数据卷</h4> <blockquote><p>映射有两种方式：</p> <ul><li>通过数据卷名称映射，如果数据卷不存在。Docker会帮你自动创建，会将容器内部自带的文件，存储在默认的存放路径中。</li> <li>通过路径映射数据卷，直接指定一个路径作为数据卷的存放位置。但是这个路径下是空的。</li></ul></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 通过数据卷名称映射</span>
<span class="token function">docker</span> run <span class="token parameter variable">-v</span> 数据卷名称:容器内部的路径 镜像id
<span class="token comment"># 通过路径映射数据卷</span>
<span class="token function">docker</span> run <span class="token parameter variable">-v</span> 路径:容器内部的路径 镜像id
</code></pre></div><h3 id="九、dockerfile自定义镜像"><a href="#九、dockerfile自定义镜像" class="header-anchor">#</a> 九、Dockerfile自定义镜像</h3> <hr> <blockquote><p>我们可以从中央仓库下载一个镜像，也可以自己手动去制作一个镜像，需要通过Dockerfile去指定自定义镜像的信息</p></blockquote> <h4 id="_9-1-dockerfile"><a href="#_9-1-dockerfile" class="header-anchor">#</a> 9.1 Dockerfile</h4> <blockquote><p>创建自定义镜像就需要创建一个Dockerfile，如下为Dockerfile的语言</p> <p>Dockerfile是由一系列命令和参数构成的脚本，这些命令应用于操作系统(centos或者Ubuntu)基础镜像并最终创建的一个新镜像；</p> <p>我们前面讲过的用手工的方式，修改配置文件，或者添加，删除文件目录的方式，来构建一种新镜像；这种手工方式麻烦，容易出错，而且不能复用；
我们这里讲Dockerfile，用脚本方式来构建自动化，可复用的，高效率的创建镜像方式，是企业级开发的首选方式；</p> <p>再软件系统开发生命周期中，采用Dockerfile来构建镜像；
1、对于开发人员:可以为开发团队提供一个完全一致的开发环境;
2、对于测试人员:可以直接拿开发时所构建的镜像或者通过Dockerfile文件构建一个新的镜像开始工作；
3、对于运维人员:在部署时，可以实现应用的无缝移植。</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code>from: 指定当前自定义镜像依赖的环境  指定基础镜像 一切从这里开始构建
copy: 将相对路径下的内容复制到自定义镜像中
workdir: 声明镜像的默认工作目录
run: 执行的命令，可以编写多个
cmd: 需要执行的命令（在workdir下执行的，cmd可以写多个，只以最后一个为准）

<span class="token comment"># 举个例子，制作SSM容器镜像，而且ssm.war要放在Dockerfile的同级目录下</span>
from daocloud.io/library/tomcat:8.5.15-jre8
copy ssm.war /usr/local/tomcat/webapps
</code></pre></div><h4 id="_9-2-通过dockerfile制作镜像"><a href="#_9-2-通过dockerfile制作镜像" class="header-anchor">#</a> 9.2 通过Dockerfile制作镜像</h4> <blockquote><p>编写完Dockerfile后需要通过命令将其制作为镜像，并且要在Dockerfile的当前目录下，之后即可在镜像中查看到指定的镜像信息，注意最后的 <a href="">.</a></p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> build <span class="token parameter variable">-t</span> 镜像名称<span class="token punctuation">[</span>:tag<span class="token punctuation">]</span> <span class="token builtin class-name">.</span>
</code></pre></div><h3 id="十-docker-compose【重点】"><a href="#十-docker-compose【重点】" class="header-anchor">#</a> 十. Docker-Compose【<code>重点</code>】</h3> <hr> <blockquote><p>之前运行一个镜像，需要添加大量的参数,可以通过Docker-Compose编写这些参数。而且Docker-Compose可以帮助我们批量的管理容器。这些信息只需要通过一个docker-compose.yml文件去维护即可。</p></blockquote> <h4 id="_10-1-下载并安装docker-compose"><a href="#_10-1-下载并安装docker-compose" class="header-anchor">#</a> 10.1 下载并安装Docker-Compose</h4> <h5 id="_10-1-1-下载docker-compose"><a href="#_10-1-1-下载docker-compose" class="header-anchor">#</a> 10.1.1 下载Docker-Compose</h5> <blockquote><p>去github官网搜索docker-compose，下载1.24.1版本的Docker-Compose</p> <p>下载路径：<a href="">https://github.com/docker/compose/releases/download/1.24.1/docker-compose-Linux-x86_64</a></p></blockquote> <h5 id="_10-1-2-设置权限"><a href="#_10-1-2-设置权限" class="header-anchor">#</a> 10.1.2 设置权限</h5> <blockquote><p>需要将DockerCompose文件的名称修改一下，给予DockerCompose文件一个可执行的权限</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mv</span> docker-compose-Linux-x86_64 <span class="token function">docker-compose</span>
<span class="token function">chmod</span> <span class="token number">777</span> <span class="token function">docker-compose</span>
</code></pre></div><h5 id="_10-1-3-配置环境变量"><a href="#_10-1-3-配置环境变量" class="header-anchor">#</a> 10.1.3 配置环境变量</h5> <blockquote><p>方便后期操作，配置一个环境变量</p> <p>将docker-compose文件移动到了/usr/local/bin , 修改了/etc/profile文件，给/usr/local/bin配置到了PATH中</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mv</span> <span class="token function">docker-compose</span> /usr/local/bin

<span class="token function">vi</span> /etc/profile
<span class="token comment"># 添加内容： export PATH=$JAVA_HOME:/usr/local/bin:$PATH</span>

<span class="token builtin class-name">source</span> /etc/profile
</code></pre></div><p><strong>个人建议的安装方式</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 直接联网下载到本地     /usr/local/bin/docker-compose</span>
<span class="token function">curl</span> <span class="token parameter variable">-L</span> https://get.daocloud.io/docker/compose/releases/download/1.26.2/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> <span class="token parameter variable">-s</span><span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">`</span></span> <span class="token operator">&gt;</span> /usr/local/bin/docker-compose

<span class="token builtin class-name">cd</span> /usr/local/bin   <span class="token comment"># 进入该目录</span>
<span class="token function">chmod</span> <span class="token number">777</span> <span class="token function">docker-compose</span>     <span class="token comment"># 给这个文件授权</span>


<span class="token comment"># 在任意目录 测试  docker-compose  命令</span>
</code></pre></div><h5 id="_10-1-4-测试"><a href="#_10-1-4-测试" class="header-anchor">#</a> 10.1.4 测试</h5> <blockquote><p>在任意目录下输入docker-compose</p></blockquote> <table><thead><tr><th style="text-align:center;">测试效果</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1586420176720.png" alt="1586420176720"></td></tr></tbody></table> <h4 id="_10-2-docker-compose管理mysql和tomcat容器"><a href="#_10-2-docker-compose管理mysql和tomcat容器" class="header-anchor">#</a> 10.2 Docker-Compose管理MySQL和Tomcat容器</h4> <blockquote><p>yml文件以key: value方式来指定配置信息</p> <p>多个配置信息以换行+缩进的方式来区分</p> <p>在docker-compose.yml文件中，不要使用制表符</p></blockquote> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.1'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>           <span class="token comment"># 服务的名称</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always   <span class="token comment"># 代表只要docker启动，那么这个容器就跟着一起启动</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> daocloud.io/library/mysql<span class="token punctuation">:</span>5.7.4  <span class="token comment"># 指定镜像路径</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql  <span class="token comment"># 指定容器名称</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 3306<span class="token punctuation">:</span><span class="token number">3306</span>   <span class="token comment">#  指定端口号的映射</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> root   <span class="token comment"># 指定MySQL的ROOT用户登录密码</span>
      <span class="token key atrule">TZ</span><span class="token punctuation">:</span> Asia/Shanghai        <span class="token comment"># 指定时区</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
     <span class="token punctuation">-</span> /opt/docker_mysql_tomcat/mysql_data<span class="token punctuation">:</span>/var/lib/mysql   <span class="token comment"># 映射数据卷</span>
  <span class="token key atrule">tomcat</span><span class="token punctuation">:</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">image</span><span class="token punctuation">:</span> daocloud.io/library/tomcat<span class="token punctuation">:</span>8.5.15<span class="token punctuation">-</span>jre8
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> tomcat
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">TZ</span><span class="token punctuation">:</span> Asia/Shanghai
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /opt/docker_mysql_tomcat/tomcat_webapps<span class="token punctuation">:</span>/usr/local/tomcat/webapps
      <span class="token punctuation">-</span> /opt/docker_mysql_tomcat/tomcat_logs<span class="token punctuation">:</span>/usr/local/tomcat/logs
</code></pre></div><h4 id="_10-3-使用docker-compose命令管理容器"><a href="#_10-3-使用docker-compose命令管理容器" class="header-anchor">#</a> 10.3 使用docker-compose命令管理容器</h4> <blockquote><p>在使用docker-compose的命令时 ，默认会在当前目录下找docker-compose.yml文件</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 1. 基于docker-compose.yml启动管理的容器</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>

<span class="token comment"># 2. 关闭并删除容器</span>
<span class="token function">docker-compose</span> down

<span class="token comment"># 3. 开启|关闭|重启已经存在的由docker-compose维护的容器</span>
<span class="token function">docker-compose</span> start<span class="token operator">|</span>stop<span class="token operator">|</span>restart

<span class="token comment"># 4. 查看由docker-compose管理的容器</span>
<span class="token function">docker-compose</span> <span class="token function">ps</span>

<span class="token comment"># 5. 查看日志</span>
<span class="token function">docker-compose</span> logs <span class="token parameter variable">-f</span>
</code></pre></div><h4 id="_10-4-docker-compose配合dockerfile使用"><a href="#_10-4-docker-compose配合dockerfile使用" class="header-anchor">#</a> 10.4 docker-compose配合Dockerfile使用</h4> <blockquote><p>使用docker-compose.yml文件以及Dockerfile文件在生成自定义镜像的同时启动当前镜像，并且由docker-compose去管理容器</p></blockquote> <h5 id="_10-4-1-docker-compose文件"><a href="#_10-4-1-docker-compose文件" class="header-anchor">#</a> 10.4.1 docker-compose文件</h5> <blockquote><p>编写docker-compose.yml文件</p></blockquote> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># yml文件</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.1'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">ssm</span><span class="token punctuation">:</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">build</span><span class="token punctuation">:</span>            <span class="token comment"># 构建自定义镜像</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ../      <span class="token comment"># 指定dockerfile文件的所在路径</span>
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile   <span class="token comment"># 指定Dockerfile文件名称</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> ssm<span class="token punctuation">:</span>1.0.1
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> ssm
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8081<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">TZ</span><span class="token punctuation">:</span> Asia/Shanghai
</code></pre></div><h5 id="_10-4-2-dockerfile文件"><a href="#_10-4-2-dockerfile文件" class="header-anchor">#</a> 10.4.2 Dockerfile文件</h5> <blockquote><p>编写Dockerfile文件</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>from daocloud.io/library/tomcat:8.5.15-jre8
copy ssm.war /usr/local/tomcat/webapps
</code></pre></div><h5 id="_10-4-3-运行"><a href="#_10-4-3-运行" class="header-anchor">#</a> 10.4.3 运行</h5> <blockquote><p>测试效果</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 可以直接启动基于docker-compose.yml以及Dockerfile文件构建的自定义镜像</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span>
<span class="token comment"># 如果自定义镜像不存在，会帮助我们构建出自定义镜像，如果自定义镜像已经存在，会直接运行这个自定义镜像</span>
<span class="token comment"># 重新构建的话。</span>
<span class="token comment"># 重新构建自定义镜像</span>
<span class="token function">docker-compose</span> build
<span class="token comment"># 运行当前内容，并重新构建</span>
<span class="token function">docker-compose</span> up <span class="token parameter variable">-d</span> <span class="token parameter variable">--build</span>
</code></pre></div><h3 id="十一-docker-ci、cd-砍掉不讲"><a href="#十一-docker-ci、cd-砍掉不讲" class="header-anchor">#</a> 十一. Docker CI、CD     砍掉不讲</h3> <hr> <h4 id="_11-1-ci、cd引言"><a href="#_11-1-ci、cd引言" class="header-anchor">#</a> 11.1 CI、CD引言</h4> <blockquote><p>项目部署</p> <ul><li>将项目通过maven进行编译打包</li> <li>将文件上传到指定的服务器中</li> <li>将war包放到tomcat的目录中</li> <li>通过Dockerfile将Tomcat和war包转成一个镜像，由DockerCompose去运行容器</li></ul> <p>项目更新后，需要将上述流程再次的从头到尾的执行一次，如果每次更新一次都执行一次上述操作，很费时，费力。我们就可以通过CI、CD帮助我们实现持续集成，持续交付和部署。</p></blockquote> <h4 id="_11-2-ci介绍"><a href="#_11-2-ci介绍" class="header-anchor">#</a> 11.2 CI介绍</h4> <blockquote><p>CI（continuous intergration）持续集成</p> <p>持续集成：编写代码时，完成了一个功能后，立即提交代码到Git仓库中，将项目重新的构建并且测试。</p> <ul><li>快速发现错误。</li> <li>防止代码偏离主分支。</li></ul></blockquote> <h4 id="_11-3-搭建gitlab服务器"><a href="#_11-3-搭建gitlab服务器" class="header-anchor">#</a> 11.3 搭建Gitlab服务器</h4> <blockquote><p>实现CI，需要使用到Gitlab远程仓库，先通过Docker搭建Gitlab</p></blockquote> <h5 id="_11-3-1-准备工作"><a href="#_11-3-1-准备工作" class="header-anchor">#</a> 11.3.1 准备工作</h5> <blockquote><ul><li>创建一个全新的虚拟机，并且至少指定4G的运行内存，4G运行内存是Gitlab推荐的内存大小。</li> <li>并且安装Docker以及Docker-Compose</li></ul></blockquote> <h5 id="_11-3-2-修改ssh的22端口"><a href="#_11-3-2-修改ssh的22端口" class="header-anchor">#</a> 11.3.2 修改ssh的22端口</h5> <blockquote><p>将ssh的默认22端口，修改为60022端口，因为Gitlab需要占用22端口</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>vi /etc/ssh/sshd_config
  PORT 22 -&gt; 60022
systemctl restart sshd
</code></pre></div><h5 id="_11-3-3-编写docker-compose-yml"><a href="#_11-3-3-编写docker-compose-yml" class="header-anchor">#</a> 11.3.3 编写docker-compose.yml</h5> <blockquote><p>docker-compose.yml文件去安装gitlab（下载和运行的时间比较长的）</p></blockquote> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.1'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
 <span class="token key atrule">gitlab</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">'twang2218/gitlab-ce-zh:11.1.4'</span>
  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> <span class="token string">&quot;gitlab&quot;</span>
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
  <span class="token key atrule">privileged</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">hostname</span><span class="token punctuation">:</span> <span class="token string">'gitlab'</span>
  <span class="token key atrule">environment</span><span class="token punctuation">:</span>
   <span class="token key atrule">TZ</span><span class="token punctuation">:</span> <span class="token string">'Asia/Shanghai'</span>
   <span class="token key atrule">GITLAB_OMNIBUS_CONFIG</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
    external_url 'http://192.168.199.110'
    gitlab_rails['time_zone'] = 'Asia/Shanghai'
    gitlab_rails['smtp_enable'] = true
    gitlab_rails['gitlab_shell_ssh_port'] = 22</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> <span class="token string">'80:80'</span>
   <span class="token punctuation">-</span> <span class="token string">'443:443'</span>
   <span class="token punctuation">-</span> <span class="token string">'22:22'</span>
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> /opt/docker_gitlab/config<span class="token punctuation">:</span>/etc/gitlab
   <span class="token punctuation">-</span> /opt/docker_gitlab/data<span class="token punctuation">:</span>/var/opt/gitlab
   <span class="token punctuation">-</span> /opt/docker_gitlab/logs<span class="token punctuation">:</span>/var/log/gitlab
</code></pre></div><h4 id="_11-4-搭建gitlabrunner"><a href="#_11-4-搭建gitlabrunner" class="header-anchor">#</a> 11.4 搭建GitlabRunner</h4> <blockquote><p>查看资料中的gitlab-runner文件即可安装</p></blockquote> <h4 id="_11-5-整合项目入门测试"><a href="#_11-5-整合项目入门测试" class="header-anchor">#</a> 11.5 整合项目入门测试</h4> <h5 id="_11-5-1-创建项目"><a href="#_11-5-1-创建项目" class="header-anchor">#</a> 11.5.1 创建项目</h5> <blockquote><p>创建maven工程，添加web.xml文件，编写html页面</p></blockquote> <h5 id="_11-5-2-编写-gitlab-ci-yml"><a href="#_11-5-2-编写-gitlab-ci-yml" class="header-anchor">#</a> 11.5.2 编写.gitlab-ci.yml</h5> <blockquote><p>编写<a href="">.gitlab-ci.yml</a>文件</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>stages:
  - test

test:
  stage: test
  script:
    - echo first test ci   # 输入的命令
</code></pre></div><h5 id="_11-5-3-将maven工程推送到gitlab中"><a href="#_11-5-3-将maven工程推送到gitlab中" class="header-anchor">#</a> 11.5.3 将maven工程推送到gitlab中</h5> <blockquote><p>执行git命令推送到Gitlab</p></blockquote> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">git</span> push origin master
</code></pre></div><h5 id="_11-5-4-查看效果"><a href="#_11-5-4-查看效果" class="header-anchor">#</a> 11.5.4 查看效果</h5> <blockquote><p>可以在gitlab中查看到gitlab-ci.yml编写的内容</p></blockquote> <table><thead><tr><th style="text-align:center;">效果图</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588671760385.png" alt="1588671760385"></td></tr></tbody></table> <h4 id="_11-6-完善项目配置"><a href="#_11-6-完善项目配置" class="header-anchor">#</a> 11.6 完善项目配置</h4> <blockquote><p>添加Dockerfile以及docker-compose.yml， 并修改<a href="">.gitlab-ci.yml</a>文件</p></blockquote> <h5 id="_11-6-1-创建dockerfile"><a href="#_11-6-1-创建dockerfile" class="header-anchor">#</a> 11.6.1 创建Dockerfile</h5> <div class="language- extra-class"><pre class="language-text"><code># Dockerfile
FROM daocloud.io/library/tomcat:8.5.15-jre8
COPY testci.war /usr/local/tomcat/webapps
</code></pre></div><h5 id="_11-6-2-创建docker-compose-yml"><a href="#_11-6-2-创建docker-compose-yml" class="header-anchor">#</a> 11.6.2 创建docker-compose.yml</h5> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># docker-compose.yml</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.1&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">testci</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> docker
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> testci
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
</code></pre></div><h5 id="_11-6-3-修改-gitlab-ci-yml"><a href="#_11-6-3-修改-gitlab-ci-yml" class="header-anchor">#</a> 11.6.3 修改.gitlab-ci.yml</h5> <div class="language- extra-class"><pre class="language-text"><code># ci.yml
stages:
  - test

test:
  stage: test
  script:
    - echo first test ci
    - /usr/local/maven/apache-maven-3.6.3/bin/mvn package
    - cp target/testci-1.0-SNAPSHOT.war docker/testci.war
    - docker-compose down
    - docker-compose up -d --build
    - docker rmi $(docker images -qf dangling=true)
</code></pre></div><h5 id="_11-6-4-测试"><a href="#_11-6-4-测试" class="header-anchor">#</a> 11.6.4 测试</h5> <table><thead><tr><th style="text-align:center;">测试效果</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588674040060.png" alt="1588674040060"></td></tr></tbody></table> <h4 id="_11-7-cd介绍"><a href="#_11-7-cd介绍" class="header-anchor">#</a> 11.7 CD介绍</h4> <blockquote><p>CD（持续交付，持续部署）</p> <p>持续交付：将代码交付给专业的测试团队去测试</p> <p>持续部署：可以直接将指定好tag的代码直接部署到生产环境中</p></blockquote> <table><thead><tr><th style="text-align:center;">CICD图</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588677492583.png" alt="1588677492583"></td></tr></tbody></table> <h4 id="_11-8-安装jenkins"><a href="#_11-8-安装jenkins" class="header-anchor">#</a> 11.8 安装Jenkins</h4> <h5 id="_11-8-1-编写docker-compose-yml"><a href="#_11-8-1-编写docker-compose-yml" class="header-anchor">#</a> 11.8.1 编写docker-compose.yml</h5> <blockquote><p>官网：https://www.jenkins.io/</p></blockquote> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.1&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">jenkins</span><span class="token punctuation">:</span>
   <span class="token key atrule">image</span><span class="token punctuation">:</span> jenkins/jenkins
   <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
   <span class="token key atrule">container_name</span><span class="token punctuation">:</span> jenkins
   <span class="token key atrule">ports</span><span class="token punctuation">:</span>
     <span class="token punctuation">-</span> 8888<span class="token punctuation">:</span><span class="token number">8080</span>
     <span class="token punctuation">-</span> 50000<span class="token punctuation">:</span><span class="token number">50000</span>
   <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
     <span class="token punctuation">-</span> ./data<span class="token punctuation">:</span>/var/jenkins_home
</code></pre></div><h5 id="_11-8-2-运行并访问jenkins"><a href="#_11-8-2-运行并访问jenkins" class="header-anchor">#</a> 11.8.2 运行并访问Jenkins</h5> <blockquote><p>第一次运行时，会因为data目录没有权限，导致启动失败</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>chmod 777 data
</code></pre></div><blockquote><p>访问http://192.168.199.109:8888</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>访问速度奇慢无比。。。。。
</code></pre></div><blockquote><p>访问成功后，需要输入密码，可在日志中查看</p></blockquote> <p><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588679573467.png" alt="1588679573467"></p> <blockquote><p>手动指定插件安装：指定下面两个插件即可</p> <p>publish ssh.</p> <p>git param.</p></blockquote> <p><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588679653006.png" alt="1588679653006"></p> <blockquote><p>安装成功后，需要指定上用户名和密码，登陆成功</p></blockquote> <p><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588681196639.png" alt="1588681196639"></p> <h4 id="_11-9-配置jenkins的目标服务器"><a href="#_11-9-配置jenkins的目标服务器" class="header-anchor">#</a> 11.9 配置Jenkins的目标服务器</h4> <blockquote><p>执行过程为代码提交到Gitlab，Jenkins会从Gitlab中拉取代码，并在Jenkins中打包并发布到目标服务器中。</p> <p>idea写代码    -----Gitlab    &lt;-----Jenkins -----&gt;目标服务器</p> <p>下面的操作 是让 jenkins 连接目标服务器</p></blockquote> <h5 id="_11-9-1-点击左侧的系统设置"><a href="#_11-9-1-点击左侧的系统设置" class="header-anchor">#</a> 11.9.1 点击左侧的系统设置</h5> <table><thead><tr><th style="text-align:center;">左侧导航</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588681954779.png" alt="1588681954779"></td></tr></tbody></table> <h5 id="_11-9-2-选中中间区域的系统设置"><a href="#_11-9-2-选中中间区域的系统设置" class="header-anchor">#</a> 11.9.2 选中中间区域的系统设置</h5> <table><thead><tr><th style="text-align:center;">系统设置</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588681970621.png" alt="1588681970621"></td></tr></tbody></table> <h5 id="_11-9-3-搜索publish-over-ssh"><a href="#_11-9-3-搜索publish-over-ssh" class="header-anchor">#</a> 11.9.3 搜索Publish over SSH</h5> <table><thead><tr><th style="text-align:center;">Publish over SSH</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588682011820.png" alt="1588682011820"></td></tr></tbody></table> <h5 id="_11-9-4-点击上图新增"><a href="#_11-9-4-点击上图新增" class="header-anchor">#</a> 11.9.4 点击上图新增</h5> <table><thead><tr><th>新增SSH连接</th></tr></thead> <tbody><tr><td><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588682092002.png" alt="1588682092002"></td></tr></tbody></table> <p><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/image-20200923094630017.png" alt="image-20200923094630017"></p> <h4 id="_11-10-配置gitlab免密码登录"><a href="#_11-10-配置gitlab免密码登录" class="header-anchor">#</a> 11.10 配置GitLab免密码登录</h4> <blockquote><p>链接Gitlab需要使用密码，我们可以通过SSH的方式，免密码登陆Gitlab拉取代码，避免每次都输入密码。</p></blockquote> <h5 id="_11-10-1登录jenkins容器内部"><a href="#_11-10-1登录jenkins容器内部" class="header-anchor">#</a> 11.10.1登录Jenkins容器内部</h5> <div class="language- extra-class"><pre class="language-text"><code>docker exec -it jenkins bash
</code></pre></div><h5 id="_11-10-2-输入生成ssh秘钥命令"><a href="#_11-10-2-输入生成ssh秘钥命令" class="header-anchor">#</a> 11.10.2 输入生成SSH秘钥命令</h5> <div class="language- extra-class"><pre class="language-text"><code>ssh-keygen -t rsa -C &quot;邮箱（随便写）&quot;
进入     cd /var/jenkins_home/.ssh/     目录   找到 id_rsa.pub 
把这个文件内容  复制到下面图中所示
</code></pre></div><h5 id="_11-10-3将秘钥复制到gitlab的ssh中"><a href="#_11-10-3将秘钥复制到gitlab的ssh中" class="header-anchor">#</a> 11.10.3将秘钥复制到GitLab的SSH中</h5> <table><thead><tr><th style="text-align:center;">配置密钥</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588683585249.png" alt="1588683585249"></td></tr></tbody></table> <h4 id="_11-11-配置jdk和maven"><a href="#_11-11-配置jdk和maven" class="header-anchor">#</a> 11.11 配置JDK和Maven</h4> <blockquote><p>我们需要再Jenkins中将代码打包，需要依赖JDK和Maven的环境</p></blockquote> <h5 id="_11-11-1-复制软件到data目录下"><a href="#_11-11-1-复制软件到data目录下" class="header-anchor">#</a> 11.11.1 复制软件到data目录下</h5> <table><thead><tr><th style="text-align:center;">效果</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588684490466.png" alt="1588684490466"></td></tr></tbody></table> <h5 id="_11-11-2-在监控界面中配置jdk和maven"><a href="#_11-11-2-在监控界面中配置jdk和maven" class="header-anchor">#</a> 11.11.2 在监控界面中配置JDK和Maven</h5> <table><thead><tr><th style="text-align:center;">配置环境变量</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588684458028.png" alt="1588684458028"></td></tr></tbody></table> <h5 id="_11-11-3-手动拉取gitlab项目"><a href="#_11-11-3-手动拉取gitlab项目" class="header-anchor">#</a> 11.11.3 手动拉取gitlab项目</h5> <blockquote><p>使用SSH无密码连接时，第一次连接需要手动确定</p></blockquote> <table><thead><tr><th style="text-align:center;">手动拉取一次</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588685220324.png" alt="1588685220324"></td></tr></tbody></table> <h4 id="_11-12-创建maven任务"><a href="#_11-12-创建maven任务" class="header-anchor">#</a> 11.12 创建maven任务</h4> <blockquote><p>实现通过Jenkins的Maven任务，自动去Gitlab拉取代码，并在本地打包，发布到目标服务器上</p></blockquote> <h5 id="_11-12-1-创建maven工程-推送到gitlab中"><a href="#_11-12-1-创建maven工程-推送到gitlab中" class="header-anchor">#</a> 11.12.1 创建maven工程，推送到GitLab中</h5> <blockquote><p>随便创建一个即可……</p></blockquote> <h5 id="_11-12-2-jenkins的监控页面中创建maven任务"><a href="#_11-12-2-jenkins的监控页面中创建maven任务" class="header-anchor">#</a> 11.12.2 Jenkins的监控页面中创建maven任务</h5> <table><thead><tr><th style="text-align:center;">指定GitLab地址</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588686481506.png" alt="1588686481506"></td></tr></tbody></table> <table><thead><tr><th style="text-align:center;">指定maven打包方式</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588686489821.png" alt="1588686489821"></td></tr></tbody></table> <h5 id="_11-12-3-执行maven任务"><a href="#_11-12-3-执行maven任务" class="header-anchor">#</a> 11.12.3 执行maven任务</h5> <table><thead><tr><th style="text-align:center;">立即构建，并查看日志</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588686591351.png" alt="1588686591351"></td></tr></tbody></table> <table><thead><tr><th style="text-align:center;">控制台查看日志信息</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588686553880.png" alt="1588686553880"></td></tr></tbody></table> <h5 id="_11-12-4-最终效果"><a href="#_11-12-4-最终效果" class="header-anchor">#</a> 11.12.4 最终效果</h5> <table><thead><tr><th style="text-align:center;">打包成功</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588687382594.png" alt="1588687382594"></td></tr></tbody></table> <h4 id="_11-13-实现持续交付持续部署"><a href="#_11-13-实现持续交付持续部署" class="header-anchor">#</a> 11.13 实现持续交付持续部署</h4> <blockquote><p>实现根据tag标签，实现持续交付和持续部署</p></blockquote> <h5 id="_11-13-1-安装persistent-parameter的插件"><a href="#_11-13-1-安装persistent-parameter的插件" class="header-anchor">#</a> 11.13.1 安装Persistent Parameter的插件</h5> <table><thead><tr><th style="text-align:center;">安装插件</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588693533099.png" alt="1588693533099"></td></tr></tbody></table> <h5 id="_11-13-2-重新指定构建项目的方式"><a href="#_11-13-2-重新指定构建项目的方式" class="header-anchor">#</a> 11.13.2 重新指定构建项目的方式</h5> <table><thead><tr><th style="text-align:center;">根据标签构建项目</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588696879059.png" alt="1588696879059"></td></tr></tbody></table> <table><thead><tr><th style="text-align:center;">自定义构建</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588697752850.png" alt="1588697752850"></td></tr></tbody></table> <h5 id="_11-13-3-构建项目成功后-需要将内容发布到目标服务器"><a href="#_11-13-3-构建项目成功后-需要将内容发布到目标服务器" class="header-anchor">#</a> 11.13.3 构建项目成功后，需要将内容发布到目标服务器</h5> <table><thead><tr><th style="text-align:center;">发布服务器后执行的命令</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588697770621.png" alt="1588697770621"></td></tr></tbody></table> <h5 id="_11-13-4-添加程序代码"><a href="#_11-13-4-添加程序代码" class="header-anchor">#</a> 11.13.4 添加程序代码</h5> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># Dockerfile 文件</span>
FROM daocloud.io/library/tomcat<span class="token punctuation">:</span>8.5.15<span class="token punctuation">-</span>jre8
COPY testcd<span class="token punctuation">-</span>1.0<span class="token punctuation">-</span>SNAPSHOT.war /usr/local/tomcat/webapps

<span class="token comment"># docker-compose.yml文件</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.1&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">testcd</span><span class="token punctuation">:</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> docker
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> testcd
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8081<span class="token punctuation">:</span><span class="token number">8080</span>
</code></pre></div><h5 id="_11-13-5-测试"><a href="#_11-13-5-测试" class="header-anchor">#</a> 11.13.5 测试</h5> <table><thead><tr><th style="text-align:center;">根据标签修改发布版本</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="https://gllspictures.oss-cn-beijing.aliyuncs.com/img/1588700462690.png" alt="1588700462690"></td></tr></tbody></table> <p>，</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/java/part4/1linux.html" class="prev">
          1linux
        </a></span> <span class="next"><a href="/java/part4/3nginx.html">
          3nginx
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#一、引言" class="sidebar-link reco-side-一、引言" data-v-b57cc07c>一、引言</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#二、docker介绍" class="sidebar-link reco-side-二、docker介绍" data-v-b57cc07c>二、Docker介绍</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#三、docker的安装" class="sidebar-link reco-side-三、docker的安装" data-v-b57cc07c>三、Docker的安装</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#四、docker的中央仓库【重点】" class="sidebar-link reco-side-四、docker的中央仓库【重点】" data-v-b57cc07c>四、Docker的中央仓库【重点】</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#五、镜像的操作【重点】" class="sidebar-link reco-side-五、镜像的操作【重点】" data-v-b57cc07c>五、镜像的操作【重点】</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#六、容器操作【重点】" class="sidebar-link reco-side-六、容器操作【重点】" data-v-b57cc07c>六、容器操作【重点】</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#七、docker应用" class="sidebar-link reco-side-七、docker应用" data-v-b57cc07c>七、Docker应用</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#八、数据卷【重点】" class="sidebar-link reco-side-八、数据卷【重点】" data-v-b57cc07c>八、数据卷【重点】</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#九、dockerfile自定义镜像" class="sidebar-link reco-side-九、dockerfile自定义镜像" data-v-b57cc07c>九、Dockerfile自定义镜像</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#十-docker-compose【重点】" class="sidebar-link reco-side-十-docker-compose【重点】" data-v-b57cc07c>十. Docker-Compose【重点】</a></li><li class="level-3" data-v-b57cc07c><a href="/java/part4/2docker.html#十一-docker-ci、cd-砍掉不讲" class="sidebar-link reco-side-十一-docker-ci、cd-砍掉不讲" data-v-b57cc07c>十一. Docker CI、CD     砍掉不讲</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="/assets/js/app.cf24e5c2.js" defer></script><script src="/assets/js/3.96e6e8dc.js" defer></script><script src="/assets/js/1.9cd0fbb8.js" defer></script><script src="/assets/js/29.62eca51f.js" defer></script>
  </body>
</html>
